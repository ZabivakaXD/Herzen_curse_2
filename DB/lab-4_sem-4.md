# Отчёт по БД лабораторная 4

Мы продолжаем решать задачи реляционной алгебры. 

Вам будет предложена та же предметная область, однако задачи будут усложнены.
В данной работе Вам необходимо представить решение по следующим запросам:

1. Определите имена и телефоны клиентов, которые в одном заказе указали не менее двух игр с разными названиями (тоже самое: определите имена и телефон клиентов, заказ которых содержит не менее 2 игр с разными названиями.)
2. Найдите таб. номер сотрудника, оформившего заказ, который включает игру с минимальным возрастом игроков 12 лет.
3. Найдите фамилии, имена клиентов, купивших игры, с минимальным количеством игроков 2, а максимальном - 6. 

## Задача 1
```
ПЗ (Номер заказа, Название игры) RENAME R1 (заказ, игра)
R2 = ПЗ TIMES R1
R3 = R2 WHERE Номер заказа = заказ AND Название игры != игра
R4 = R3[Номер заказа]
R5 = З[З.Номер = R4.Номер заказа]R4
R6 = К[К.ИД Клиента = R5.ИД Клиента]R5
R7 = R6[Имя, Телефон]
```
Переименовываем название столбцов, чтобы не было ошибки. Потом делаем декартовое произведение ПЗ и R1. После происходит выборка, где остаются только номера заказов с разныи играми, тк номера заказов равны, а названия игр нет. После проицыруем R3 по номеру заказа. Объеденяем З, К и R4. Проецируем R6 по именам и телефонам.
## Задача 2
```
R1 = З[З.Номер = ПЗ.Номер заказа]ПЗ
R2 = R1[R1.Название игры = И.Название]И
R3 = R2 WHERE Мин возраст = 12
R4 = R3[Таб номер]
```
В данном случае происходит объединение З, ПЗ и И. После делаем выборку, где остаются строки в которых значение Мин возраст = 12. И в итоге делаем проекцию по столбцу Таб номер.
## Задача 3
```
R1 = И[И.Название = ПЗ.Название игры]ПЗ
R2 = R1[R1.Номер заказа = З.Номер]З
R3 = R2[R2.Ид клиента = К.Ид клиента]К
R4 = R3 WHERE Мин игроков = 2 AND Макс игроков = 6
R5 = R4[Фамилия, Имя]
```
Объеденям таблицы И, З, К и ПЗ. Делаем выборку, чтобы Мин игроков = 2 и Макс игроков = 6. В конце делаем проекцию по столбцам Фамилия и Имя.